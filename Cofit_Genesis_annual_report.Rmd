---
title: "Cofit x Genensis"
subtitle: " 醫療大數據 (分析報告)"
author: "MA-DS TEAM"
date: "`r Sys.Date()`"
knit: "bookdown::render_book"
site: bookdown::bookdown_site
documentclass: book
output:
  bookdown::gitbook:
    dev: svglite
    css: css/style.css
    toc_depth: 3
    split_by: section
    number_sections: true
    split_bib: false
    anchor_sections: true
    config:
      toc:
        scroll_highlight: yes
        collapse: section
      sharing:
        facebook: false
        twitter: false
    search: yes
    
  bookdown::pdf_book:
    toc_depth: 3
    number_sections: true
    citation_package: default
    pandoc_args: [ "--csl", "chicago-fullnote-bibliography.csl" ]

  bookdown::word_document2:
    default

  bookdown::markdown_document2:
    default
---

```{r setup, include=FALSE}
library(googleVis)
knitr::opts_chunk$set(echo = FALSE, comment = NA, results = 'asis')
options(knitr.graphics.auto_pdf = TRUE, gvis.plot.tag = 'chart')

```

# Preface {#index .unnumbered}

![[Page Example]cover:](https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Wikipedia-logo-v2.svg/1200px-Wikipedia-logo-v2.svg.png){width="219"}

**Last updated on: `r format (Sys.Date(), '%d %b %Y')`**.

Introduction context...(editing)

#### Disclaimer {.unnumbered}

The information in this book is provided ...(editing).

```{r}
Sys.time()
```



<!--chapter:end:index.Rmd-->

# Efficacy - Single Treatment

```{r input rscript, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
source("~/Lincoln/02.Work/04. R&D/02. HIIS_OPP/00.Gitbook/01.CG/CG_report/rscript/lin_function.R")
source("~/Lincoln/02.Work/04. R&D/02. HIIS_OPP/00.Gitbook/01.CG/CG_report/rscript/00-data_preprocessing.R")
source("~/Lincoln/02.Work/04. R&D/02. HIIS_OPP/00.Gitbook/01.CG/CG_report/rscript/01.1-venns.R")
source("~/Lincoln/02.Work/04. R&D/02. HIIS_OPP/00.Gitbook/01.CG/CG_report/rscript/01.2-global_treatment.R")

```

TBD...

## Datasets (Vens Graph) {#vens_graph}

```{r}
cat("Until 2022.11.01", "\n")
plot_1
cat(" Inbody(obs.):", clinic_inbody_data_ori %>% select(id) %>% pull() %>% unique() %>% length(), "counts\n",
    "Blood(obs.):", clinic_blood_data_ori %>% select(id) %>% pull() %>% unique() %>% length(), "counts\n",
    "Genesis(obs.):", clinical_list %>% select(id) %>% pull() %>% unique() %>% length(), "counts\n",
    "Extract obs. from 初日+北秀:", Reduce(dplyr::intersect, list(clinic_inbody_data_ori %>% select(id) %>% pull() %>% unique(),
                                                 clinic_blood_data_ori %>% select(id) %>% pull() %>% unique(),
                                                 clinical_list %>% select(id) %>% pull() %>% unique())) %>% length(), "+",
    dplyr::setdiff((dplyr::intersect(clinic_inbody_data_ori %>% select(id) %>% pull() %>% unique(),
                                                 clinic_blood_data_ori %>% select(id) %>% pull() %>% unique())),
                   clinical_list %>% select(id) %>% pull() %>% unique()) %>% length(), "=",
    dplyr::intersect(clinic_inbody_data_ori %>% select(id) %>% pull() %>% unique(),
                     clinic_blood_data_ori %>% select(id) %>% pull() %>% unique()) %>% length(),"counts\n")
```

**Inclusive Criteria:**

1.  1st treatment: Ob.(Weight Loss Program)
2.  At least 2 observations (Inbody & Blood)
3.  At least 1mo interval
4.  With OGTT baseline data(i.e., no missing value)

```{r}
plot_3
cat(" Total obs.:", dplyr::intersect(clinic_inbody_data_ori %>% select(id) %>% pull() %>% unique(),
                     clinic_blood_data_ori %>% select(id) %>% pull() %>% unique()) %>% length(),"counts\n",
    "Excluded obs.:", (dplyr::intersect(clinic_inbody_data_ori %>% select(id) %>% pull() %>% unique(),
                     clinic_blood_data_ori %>% select(id) %>% pull() %>% unique()) %>% length()) - (stat_table_1st %>% filter(client_type != 1) %>% select(id) %>% pull() %>% unique() %>% length()), "counts\n",
    "Included obs.:", stat_table_1st %>% filter(client_type != 1) %>% select(id) %>% pull() %>% unique() %>% length(), "counts\n")
```

## Treatment Effectiveness(Obesity) {#single_treatment_ob}

### Population Info

**Subjects Distribution** Age & Gender分佈

```{r, results='asis'}
gvisMerge(pie_01, pie_02, horizontal = FALSE) %>% plot()
```

BMI分佈
```{r, results='asis'}
gvisMerge(pie_03, pie_04, horizontal = FALSE) %>% plot()

```

### Global Evaluation {#global_result_ob}

```{r}
plot(plot_stack_col)
```

<!--chapter:end:01-single_treatment_efficacy.Rmd-->

